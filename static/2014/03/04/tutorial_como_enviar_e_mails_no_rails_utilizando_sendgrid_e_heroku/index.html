
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>[Tutorial] Como enviar e-mails no Rails utilizando Sendgrid e Heroku</title>
    <meta name="description" content="">

    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="../../../../favicon.ico">

    <link rel="stylesheet" type="text/css" href="../../../../assets/css/screen.css?v=9cbee88b34">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic%7COpen+Sans:700,400">

    <link rel="canonical" href="index.html">
    <meta name="referrer" content="origin">
    
    <meta property="og:site_name" content="Fernando Paladini">
    <meta property="og:type" content="article">
    <meta property="og:title" content="[Tutorial] Como enviar e-mails no Rails utilizando Sendgrid e Heroku">
    <meta property="og:description" content="Recentemente tive que implementar um sistema de envio de e-mails em um projeto que tenho trabalhado e como sou iniciante em Ruby on Rails senti certas dificuldades. Por isso criei esse pequeno guia onde você vai aprender como enviar e-mails...">
    <meta property="og:url" content="http://localhost:2368/2014/03/04/tutorial_como_enviar_e_mails_no_rails_utilizando_sendgrid_e_heroku/">
    <meta property="article:published_time" content="2014-03-04T13:14:00.002Z">
    <meta property="article:modified_time" content="2014-03-04T13:20:29.549Z">
    <meta property="article:tag" content="Tutoriais">
    <meta property="article:tag" content="Rails">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="[Tutorial] Como enviar e-mails no Rails utilizando Sendgrid e Heroku">
    <meta name="twitter:description" content="Recentemente tive que implementar um sistema de envio de e-mails em um projeto que tenho trabalhado e como sou iniciante em Ruby on Rails senti certas dificuldades. Por isso criei esse pequeno guia onde você vai aprender como enviar e-mails...">
    <meta name="twitter:url" content="http://localhost:2368/2014/03/04/tutorial_como_enviar_e_mails_no_rails_utilizando_sendgrid_e_heroku/">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Fernando Paladini",
    "author": {
        "@type": "Person",
        "name": "Fernando Paladini",
        "image": "//www.gravatar.com/avatar/2a428af3cd0c8c1f7e0c29ea0e2352ed?s=250&d=mm&r=x",
        "url": "http://localhost:2368/author/fernandopaladini",
        "sameAs": null,
        "description": null
    },
    "headline": "[Tutorial] Como enviar e-mails no Rails utilizando Sendgrid e Heroku",
    "url": "http://localhost:2368/2014/03/04/tutorial_como_enviar_e_mails_no_rails_utilizando_sendgrid_e_heroku/",
    "datePublished": "2014-03-04T13:14:00.002Z",
    "dateModified": "2014-03-04T13:20:29.549Z",
    "keywords": "Tutoriais, Rails",
    "description": "Recentemente tive que implementar um sistema de envio de e-mails em um projeto que tenho trabalhado e como sou iniciante em Ruby on Rails senti certas dificuldades. Por isso criei esse pequeno guia onde você vai aprender como enviar e-mails..."
}
    </script>

    <meta name="generator" content="Ghost 0.7">
    <link rel="alternate" type="application/rss+xml" title="Fernando Paladini" href="../../../../rss/index.html">
</head>
<body class="post-template tag-tutoriais tag-rails nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="index.html#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
            <li class="nav-home" role="presentation"><a href="../../../../">Home</a></li>
            <li class="nav-sobre" role="presentation"><a href="../../../../author/fernandopaladini.2">Sobre</a></li>
    </ul>
    <a class="subscribe-button icon-feed" href="../../../../rss/index.rss">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        
            <a class="menu-button icon-menu" href="index.html#"><span class="word">Menu</span></a>
    </nav>
</header>

<main class="content" role="main">
    <article class="post tag-tutoriais tag-rails">

        <header class="post-header">
            <h1 class="post-title">[Tutorial] Como enviar e-mails no Rails utilizando Sendgrid e Heroku</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2014-03-04">04 March 2014</time>  on <a href="../../../../tag/tutoriais/">Tutoriais</a>, <a href="../../../../tag/rails/">Rails</a>
            </section>
        </header>

        <section class="post-content">
            <p><img src="http://3.bp.blogspot.com/-6dDY9Scs4-Q/UxXEY1fP3vI/AAAAAAAAAcM/v1_Lht_0eoA/s1600/sendgrid-banner-fernado-paladini-tutorial-rails-heroku-enviar-emails-sent-email.jpeg" alt="[Tutorial] Como enviar e-mails no Rails utilizando Sendgrid e Heroku" title="[Tutorial] Como enviar e-mails no Rails utilizando Sendgrid e Heroku"> 
Recentemente tive que implementar um sistema de envio de e-mails em um projeto que tenho trabalhado e como sou iniciante em Ruby on Rails senti certas dificuldades. Por isso criei esse pequeno guia onde você vai aprender como enviar e-mails no Rails utilizando o Heroku e a gem <a href="http://sendgrid.com/">Sendgrid</a> </p>

<p>Antes de mais nada, tenha o seu projeto já online no Heroku. Você provavelmente já deve ter feito isso, então vamos para o primeiro passo. </p>

<p><strong>1º Passo -</strong> Abra o terminal e navegue até a pasta do seu projeto. Feito isso, adicione o Sendgrid ao seu projeto: </p>

<pre class="prettify">heroku addons:add sendgrid:starter</pre>

<p><strong>2º Passo -</strong> Para testar se o Sendgrid foi adicionado com sucesso ao Heroku, digite no terminal o comando abaixo. Se retornar algo, então está tudo certo. </p>

<pre class="prettify">heroku config:get SENDGRID_PASSWORD</pre>

<p><strong>3° Passo -</strong> No arquivo "config/environments/production.rb" adicione as seguintes linhas: </p>

<pre class="prettify">ActionMailer::Base.smtp_settings = { 

:address =&gt; ‘smtp.sendgrid.net’, 

:port =&gt; ’587′, 

:authentication =&gt; :plain, 

:user_name =&gt; ENV['SENDGRID_USERNAME'], 

:password =&gt; ENV['SENDGRID_PASSWORD'], 

:domain =&gt; ‘heroku.com’ 
} 
ActionMailer::Base.delivery_method = :smtp</pre>

<p>Com a configuração atual, você só poderá testar o envio de e-mails na Produção, ou seja, no Heroku. Isso porque as variáveis ENV estão configurados somente no Heroku, não no seu localhost. Se você acha melhor testar no seu localhost antes de enviar para o Heroku, siga o próximo passo (depois dos testes iniciais, é bom remover a configuração descrita no passo abaixo). </p>

<p><strong>4º Passo -</strong> No arquivo "config/environments/development.rb" adicione as seguintes linhas: </p>

<pre class="prettify">ActionMailer::Base.smtp_settings = { 

:address =&gt; ‘smtp.sendgrid.net’, 

:port =&gt; ’587′, 

:authentication =&gt; :plain, 

:user_name =&gt; "**substituir_aqui"**, 

:password =&gt; "**substituir_aqui2"**, 

:domain =&gt; ‘heroku.com’ 
} 
ActionMailer::Base.delivery_method = :smtp</pre>

<p><strong>5° Passo -</strong>Digite os seguintes comandos no Terminal. O texto em negrito deve ser substituído por eles. </p>

<pre class="prettify">heroku config:get SENDGRID_USERNAME #=&gt; O que retornar, coloque em "**substituir_aqui**".  
heroku config:get SENDGRID_PASSWORD #=&gt; O que retornar, coloque em "**substituir_aqui2**".</pre>

<p>Agora você deve adicionar um ActionMailer, que é um modulo padrão do Rails que serve para enviar e-mails. Não vou falar muito sobre o ActionMailer aqui, só vou usar um exemplo simples. Para saber mais sobre ActionMailer, veja e <a href="http://guides.rubyonrails.org/action_mailer_basics.html">isso</a> </p>

<p><strong>6° Passo -</strong> Adicione um ActionMailer para quando um novo usuário se registra no site, por exemplo: </p>

<pre class="prettify">rails g mailer UserMailer</pre>

<p><strong>7º Passo -</strong> No arquivo gerado em "app/mailers/user_mailer.rb", adicione o seguinte método (substitua por um e-mail seu, para testar se está funcionando): </p>

<pre class="prettify">def novo_usuario 

mail(:to =&gt; “seu@email.com”, :subject =&gt; “Bem vindo ao meu site!”)  
end</pre>

<p><strong>8º Passo -</strong> Agora precisamos testar e ver se está tudo funcionando. Entre no "Rails Console" digitando "rails c" no terminal e então coloque: </p>

<pre class="prettify">UserMailer.novo_usuario.deliver</pre>

<p>Em instantes você deve receber uma mensagem no seu e-mail com o assunto "<strong>Bem vindo ao meu site!</strong>". E pronto, finalizamos! Agora basta você aprender a usar o ActionMailer e seja feliz! </p>

<p>Quaisquer comentários são bem vindos, se não tem nada para comentar, então curta no Facebook ou retweet.</p>
        </section>

        <footer class="post-footer">


            <figure class="author-image">
                <a class="img" href="../../../../author/fernandopaladini.2" style="background-image: url(http://www.gravatar.com/avatar/2a428af3cd0c8c1f7e0c29ea0e2352ed?s=250&amp;d=mm&amp;r=x)"><span class="hidden">Fernando Paladini's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="../../../../author/fernandopaladini.2">Fernando Paladini</a></h4>

                    <p>Read <a href="../../../../author/fernandopaladini.2">more posts</a> by this author.</p>
                <div class="author-meta">
                    <span class="author-location icon-location">Florianópolis, Brazil</span>
                    
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/intent/tweet?text=%5BTutorial%5D%20Como%20enviar%20e-mails%20no%20Rails%20utilizando%20Sendgrid%20e%20Heroku&amp;url=http://localhost:2368/2014/03/04/tutorial_como_enviar_e_mails_no_rails_utilizando_sendgrid_e_heroku/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:2368/2014/03/04/tutorial_como_enviar_e_mails_no_rails_utilizando_sendgrid_e_heroku/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://localhost:2368/2014/03/04/tutorial_como_enviar_e_mails_no_rails_utilizando_sendgrid_e_heroku/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

            <div id="disqus_thread"></div>
            <script>
                /**
                 *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                 *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
                 */
                /*
                var disqus_config = function () {
                    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
                    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                };
                */
                (function() {  // DON'T EDIT BELOW THIS LINE
                    var d = document, s = d.createElement('script');
                    
                    s.src = '//nandopaladini.disqus.com/embed.js';
                    
                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

        </footer>

    </article>
</main>

<aside class="read-next">
    <a class="read-next-story no-cover" href="../../12/um_tutorial_de_dublin_core_para_iniciantes/">
        <section class="post">
            <h2>Um tutorial de Dublin Core para iniciantes</h2>
            <p>Recentemente falei sobre SEO e as meta tags Dublin Core  Acabei de criar um guia tutorial para iniciantes em…</p>
        </section>
    </a>
    <a class="read-next-story prev no-cover" href="../../../02/25/o_que_significa_foss_no_mundo_da_informatica/">
        <section class="post">
            <h2>O que significa 'FOSS' no mundo da informática?</h2>
            <p>Se você é uma pessoa muito ativa no mundo da informática, talvez já tenha se deparado alguma vez com…</p>
        </section>
    </a>
</aside>





        <footer class="site-footer clearfix">
            <section class="copyright"><a href="../../../../">Fernando Paladini</a> © 2016</section>
            <section class="poweredby">Proudly published with <a href="https://ghost.org">Ghost</a></section>
        </footer>

    </div>

    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    

    <script type="text/javascript" src="../../../../assets/js/jquery.fitvids.js?v=9cbee88b34"></script>
    <script type="text/javascript" src="../../../../assets/js/index.js?v=9cbee88b34"></script>
        
    <script id="dsq-count-scr" src="http://nandopaladini.disqus.com/count.js" async></script>
    
    

</body>
